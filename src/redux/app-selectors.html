<script>
    (function () {
        const selectors = {
            balance: (state) => {
                // if (state && state.balance) {
                //     return {
                //         // swt: (state.balance / 1e18).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g, " "),
                //         swt: (state.balance.kovan / 1e18).toFixed(2),
                //         usd: 'A bunch more',
                //         cashWei: parseInt(state.balance.kovan),
                //         reservesWei: parseInt(state.balance.main),
                //         cash: (state.balance.kovan / 1e18).toFixed(2),
                //         cashUSD: '500.00',
                //         reserves: (state.balance.main / 1e18).toFixed(2),
                //         reservesUSD: '100.00',
                //     }
                // } else {
                //     return {
                //         swt: '?',
                //         usd: '?'
                //     }
                // }

            },
            // when returning object literal, wrap it in parentheses 
            // parser will then treat it as expression, not block statement
            // effectively returning the wrapped object
            hashtag: (state) => {
                let hashtag = {
                    ...state.hashtags[state.current.hashtag],
                    address: state.current.hashtag
                }
                if (hashtag.items) {
                    let item;
                    for (item in hashtag.items) {
                        if (hashtag.hasOwnProperty(item)
                            && hashtag[item].providerAddress
                            && hashtag[item].replies
                            && hashtag[item].providerAddress != '0x0000000000000000000000000000000000000000') {
                            hashtag[item].providerUsername = hashtag[item].replies[hashtag[item].providerAddress].username || 'No provider username';
                            hashtag[item].providerAvatarHash = hashtag[item].replies[hashtag[item].providerAddress].avatarHash;
                        }

                    }
                }
                return hashtag;
            },
            confirmedTx: (state) => state.confirmedTx,
            hashtagList: (state) => state.hashtagList,
            address: (state) => state.publicKey,
            username: (state) => state.username,
            language: (state) => state.language,
            avatar: (state) => state.avatar,
            item: (state) => {
                if (state.hashtags[state.current.hashtag]
                    && state.hashtags[state.current.hashtag].items) {
                    return {
                        ...state.hashtags[state.current.hashtag].items[state.current.item],
                        itemHash: state.current.item
                    };
                }
            },
        }

        // Export
        if (!window.AppStore) window.AppStore = {}
        window.AppStore.selectors = selectors;
    }());
</script>